@using MyApplication.Components.Service.Acr

<MudStack Spacing="2">
    <MudText Typo="Typo.subtitle2">New Hire</MudText>

    <MudGrid>
        <MudItem xs="12" md="4">
            <MudTextField Label="First Name"
                          @bind-Value="FirstName"
                          ReadOnly="@ReadOnly" />
        </MudItem>
        <MudItem xs="12" md="4">
            <MudTextField Label="Last Name"
                          @bind-Value="LastName"
                          ReadOnly="@ReadOnly" />
        </MudItem>
        <MudItem xs="12" md="4">
            <MudTextField Label="Middle Initial"
                          @bind-Value="MiddleInitial"
                          ReadOnly="@ReadOnly"
                          MaxLength="1" />
        </MudItem>

        <MudItem xs="12" md="4">
            <MudTextField Label="NMCI Email"
                          @bind-Value="NmciEmail"
                          ReadOnly="@ReadOnly" />
        </MudItem>

        <MudItem xs="12" md="4">
            <MudTextField Label="USN Operator Id"
                          @bind-Value="UsnOperatorId"
                          ReadOnly="@ReadOnly" />
        </MudItem>
        <MudItem xs="12" md="4">
            <MudTextField Label="USN Admin Id"
                          @bind-Value="UsnAdminId"
                          ReadOnly="@ReadOnly" />
        </MudItem>

        <MudItem xs="12" md="4">
            <MudTextField Label="Corporate Email"
                          @bind-Value="CorporateEmail"
                          ReadOnly="@ReadOnly" />
        </MudItem>
        <MudItem xs="12" md="4">
            <MudTextField Label="Corporate Id"
                          @bind-Value="CorporateId"
                          ReadOnly="@ReadOnly" />
        </MudItem>
        <MudItem xs="12" md="4">
            <MudTextField Label="Domain Login Name"
                          @bind-Value="DomainLoginName"
                          ReadOnly="@ReadOnly" />
        </MudItem>
    </MudGrid>
</MudStack>

@code {
    // Host still passes this; we just don't render the picker here.
    [Parameter] public DateOnly EffectiveDate { get; set; }
    [Parameter] public bool ReadOnly { get; set; }

    [Parameter] public NewHireDto? Value { get; set; }
    [Parameter] public EventCallback<NewHireDto?> ValueChanged { get; set; }

    // Helper to ensure Value is never null when we use it
    private NewHireDto Current
    {
        get => Value ?? new NewHireDto(null, null, null, null, null, null, null, null, null);
        set => ValueChanged.InvokeAsync(value);
    }

    // These properties are used for @bind-Value. Each setter updates the DTO and raises ValueChanged.
    private string? FirstName
    {
        get => Current.FirstName;
        set => Current = Current with { FirstName = value };
    }

    private string? LastName
    {
        get => Current.LastName;
        set => Current = Current with { LastName = value };
    }

    private string? MiddleInitial
    {
        get => Current.MiddleInitial;
        set => Current = Current with { MiddleInitial = value };
    }

    private string? NmciEmail
    {
        get => Current.NmciEmail;
        set => Current = Current with { NmciEmail = value };
    }

    private string? UsnOperatorId
    {
        get => Current.UsnOperatorId;
        set => Current = Current with { UsnOperatorId = value };
    }

    private string? UsnAdminId
    {
        get => Current.UsnAdminId;
        set => Current = Current with { UsnAdminId = value };
    }

    private string? CorporateEmail
    {
        get => Current.CorporateEmail;
        set => Current = Current with { CorporateEmail = value };
    }

    private string? CorporateId
    {
        get => Current.CorporateId;
        set => Current = Current with { CorporateId = value };
    }

    private string? DomainLoginName
    {
        get => Current.DomainLoginName;
        set => Current = Current with { DomainLoginName = value };
    }
}